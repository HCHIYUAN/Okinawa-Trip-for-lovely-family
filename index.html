<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>å¥³ç‹çš„æ²–ç¹©ç”Ÿæ—¥ä¹‹æ—…</title>

    <!-- PWA/Icon è¨­å®š -->
    <link rel="icon" type="image/png" href="icon.png">
    <link rel="apple-touch-icon" href="icon.png">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-title" content="æ²–ç¹©ä¹‹æ—…">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="mobile-web-app-capable" content="yes">
    <!-- è¨­å®š Android Chrome ä¸»é¡Œè‰²ï¼Œè®“ç‹€æ…‹åˆ—èˆ‡ APP èåˆ -->
    <meta name="theme-color" content="#fff1f2">

    <!-- å¼•å…¥ React å’Œ Tailwind -->
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        rose: { 50: '#fff1f2', 100: '#ffe4e6', 200: '#fecdd3', 300: '#fda4af', 400: '#fb7185', 500: '#f43f5e', 600: '#e11d48' },
                        gold: { 400: '#fbbf24', 500: '#f59e0b' }
                    },
                    animation: {
                        'float': 'float 6s ease-in-out infinite',
                        'pulse-slow': 'pulse 3s cubic-bezier(0.4, 0, 0.6, 1) infinite',
                        'shimmer': 'shimmer 2.5s linear infinite',
                    },
                    keyframes: {
                        float: {
                            '0%, 100%': { transform: 'translateY(0)' },
                            '50%': { transform: 'translateY(-20px)' },
                        },
                        shimmer: {
                            '0%': { backgroundPosition: '-200% 0' },
                            '100%': { backgroundPosition: '200% 0' },
                        }
                    }
                }
            }
        }
    </script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@300;400;500;700&display=swap');
        @import url('https://fonts.googleapis.com/css2?family=Great+Vibes&display=swap');
        @import url('https://fonts.googleapis.com/css2?family=Zen+Maru+Gothic:wght@500;700&display=swap');
        
        /* APP è³ªæ„Ÿå…¨åŸŸè¨­å®š */
        html {
            /* é˜²æ­¢ iOS æ©¡çš®ç­‹å›å½ˆæ•ˆæœ */
            overscroll-behavior-y: none;
        }
        
        body { 
            font-family: 'Noto Sans TC', sans-serif; 
            /* ç§»é™¤é»æ“Šé«˜äº® */
            -webkit-tap-highlight-color: transparent; 
            /* ç¦æ­¢é¸å–æ–‡å­— (åƒ App ä¸€æ¨£) */
            -webkit-user-select: none;
            user-select: none;
            /* ç¢ºä¿å¡«æ»¿è¢å¹• */
            min-height: 100vh;
            background-color: #fff1f2;
        }

        /* æ¢å¾©è¼¸å…¥æ¡†çš„æ–‡å­—é¸å–åŠŸèƒ½ */
        input, textarea {
            -webkit-user-select: text;
            user-select: text;
        }

        .font-script { font-family: 'Great Vibes', cursive; }
        .font-cute { font-family: 'Zen Maru Gothic', sans-serif; }
        .no-scrollbar::-webkit-scrollbar { display: none; }
        .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
        
        /* Checkbox Custom Style */
        .custom-checkbox:checked + div {
            background-color: #f43f5e;
            border-color: #f43f5e;
        }
        .custom-checkbox:checked + div svg {
            display: block;
        }

        /* å®‰å…¨å€åŸŸè¨­å®š (é‡å° iPhone X ä»¥ä¸Šæ©Ÿå‹) */
        .safe-top {
            padding-top: env(safe-area-inset-top);
        }
        .safe-bottom {
            padding-bottom: env(safe-area-inset-bottom);
        }
    </style>
</head>
<body class="bg-rose-50 text-gray-800 antialiased selection:bg-rose-200">
    <div id="root"></div>

    <script type="text/babel">
        // --- åœ–æ¨™çµ„ä»¶åº« ---
        const Icon = ({ path, size = 24, className = "", ...props }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className} {...props}>
                {path}
            </svg>
        );

        const Icons = {
            Heart: (p) => <Icon {...p} path={<path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path>} />,
            Coffee: (p) => <Icon {...p} path={<><path d="M18 8h1a4 4 0 0 1 0 8h-1"></path><path d="M2 8h16v9a4 4 0 0 1-4 4H6a4 4 0 0 1-4-4V8z"></path><line x1="6" y1="1" x2="6" y2="4"></line><line x1="10" y1="1" x2="10" y2="4"></line><line x1="14" y1="1" x2="14" y2="4"></line></>} />,
            Utensils: (p) => <Icon {...p} path={<><path d="M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2"></path><path d="M7 2v20"></path><path d="M21 15V2v0a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7"></path></>} />,
            Baby: (p) => <Icon {...p} path={<><circle cx="12" cy="5" r="3"></circle><path d="M9 12h6"></path><path d="M14.5 18a2.5 2.5 0 0 0-5 0"></path><path d="M6 10v4a4 4 0 0 0 4 4h4a4 4 0 0 0 4-4v-4"></path></>} />,
            MapPin: (p) => <Icon {...p} path={<><path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"></path><circle cx="12" cy="10" r="3"></circle></>} />,
            ShoppingBag: (p) => <Icon {...p} path={<><path d="M6 2L3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4z"></path><line x1="3" y1="6" x2="21" y2="6"></line><path d="M16 10a4 4 0 0 1-8 0"></path></>} />,
            Gift: (p) => <Icon {...p} path={<><polyline points="20 12 20 22 4 22 4 12"></polyline><rect x="2" y="7" width="20" height="5"></rect><line x1="12" y1="22" x2="12" y2="7"></line><path d="M12 7H7.5a2.5 2.5 0 0 1 0-5C11 2 12 7 12 7z"></path><path d="M12 7h4.5a2.5 2.5 0 0 0 0-5C13 2 12 7 12 7z"></path></>} />,
            Music: (p) => <Icon {...p} path={<><path d="M9 18V5l12-2v13"></path><circle cx="6" cy="18" r="3"></circle><circle cx="18" cy="16" r="3"></circle></>} />,
            Star: (p) => <Icon {...p} path={<polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"></polygon>} />,
            Fish: (p) => <Icon {...p} path={<path d="M20.3 19.3L15.4 15.4C15.1 15.1 14.7 15 14.2 15H14C12.9 15 12 14.1 12 13V12C12 10.9 12.9 10 14 10H14.2C14.7 10 15.1 9.9 15.4 9.6L20.3 5.7C20.9 5.2 22 5.5 22 6.4V18.7C22 19.5 20.9 19.9 20.3 19.3ZM6 13C3.8 13 2 11.2 2 9C2 6.8 3.8 5 6 5C8.2 5 10 6.8 10 9C10 11.2 8.2 13 6 13Z"></path>} />,
            Car: (p) => <Icon {...p} path={<path d="M14 16H9m10-9h-4l-1-2H10L9 7H5a2 2 0 0 0-2 2v6h2m14 0h2v-6a2 2 0 0 0-2-2ZM7 16a2 2 0 1 1-4 0 2 2 0 0 1 4 0Zm14 0a2 2 0 1 1-4 0 2 2 0 0 1 4 0Z"></path>} />,
            Cake: (p) => <Icon {...p} path={<><path d="M20 21v-8a2 2 0 0 0-2-2H6a2 2 0 0 0-2 2v8"></path><path d="M4 16s.5-1 2-1 2.5 2 4 2 2.5-2 4-2 2.5 2 4 2 2-1 2-1"></path><path d="M2 21h20"></path><path d="M7 8v2"></path><path d="M12 8v2"></path><path d="M17 8v2"></path><path d="M7 4h.01"></path><path d="M12 4h.01"></path><path d="M17 4h.01"></path></>} />,
            Nav: (p) => <Icon {...p} path={<polygon points="3 11 22 2 13 21 11 13 3 11"></polygon>} />,
            Plane: (p) => <Icon {...p} path={<path d="M22 2L11 13M22 2l-7 20-4-9-9-4 20-7z"/>} />,
            List: (p) => <Icon {...p} path={<><line x1="8" y1="6" x2="21" y2="6"></line><line x1="8" y1="12" x2="21" y2="12"></line><line x1="8" y1="18" x2="21" y2="18"></line><line x1="3" y1="6" x2="3.01" y2="6"></line><line x1="3" y1="12" x2="3.01" y2="12"></line><line x1="3" y1="18" x2="3.01" y2="18"></line></>} />,
            Calendar: (p) => <Icon {...p} path={<><rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect><line x1="16" y1="2" x2="16" y2="6"></line><line x1="8" y1="2" x2="8" y2="6"></line><line x1="3" y1="10" x2="21" y2="10"></line></>} />,
            CheckSquare: (p) => <Icon {...p} path={<polyline points="9 11 12 14 22 4"></polyline>} />,
            Trash: (p) => <Icon {...p} path={<><polyline points="3 6 5 6 21 6"></polyline><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path></>} />,
            Edit: (p) => <Icon {...p} path={<><path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path><path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"></path></>} />,
            Plus: (p) => <Icon {...p} path={<><line x1="12" y1="5" x2="12" y2="19"></line><line x1="5" y1="12" x2="19" y2="12"></line></>} />,
            X: (p) => <Icon {...p} path={<><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></>} />,
            Save: (p) => <Icon {...p} path={<polyline points="20 6 9 17 4 12"></polyline>} />,
        };

        // --- è¯éº—é–‹å ´å‹•ç•« (ä¿æŒä¸è®Š) ---
        const WelcomeScreen = ({ onStart }) => {
            const [showBtn, setShowBtn] = React.useState(false);

            React.useEffect(() => {
                const timer = setTimeout(() => setShowBtn(true), 3000);
                return () => clearTimeout(timer);
            }, []);

            return (
                <div className="fixed inset-0 z-50 bg-gradient-to-b from-rose-100 via-pink-50 to-white text-gray-800 flex flex-col items-center justify-center overflow-hidden">
                    <div className="absolute top-0 left-0 w-full h-full opacity-30 pointer-events-none">
                        <div className="absolute top-[-10%] left-[-10%] w-[50%] h-[50%] bg-pink-300 rounded-full blur-[100px] animate-pulse-slow"></div>
                        <div className="absolute bottom-[-10%] right-[-10%] w-[60%] h-[60%] bg-rose-200 rounded-full blur-[120px] animate-pulse-slow"></div>
                    </div>

                    <div className="z-10 text-center space-y-6 px-6 max-w-lg w-full">
                        <div className="opacity-0 animate-[fadeIn_1.5s_ease-out_forwards]">
                            <p className="text-3xl font-script text-rose-500 tracking-wider drop-shadow-sm">To My Dearest Queen</p>
                        </div>
                        
                        <div className="opacity-0 animate-[scaleIn_1.5s_ease-out_0.8s_forwards] relative">
                            <h1 className="text-5xl md:text-7xl font-script bg-clip-text text-transparent bg-gradient-to-r from-rose-500 via-pink-500 to-rose-400 drop-shadow-sm py-2 leading-tight">
                                Happy Birthday
                            </h1>
                            <div className="absolute -top-10 -right-4 text-yellow-400 animate-bounce delay-700">
                                <Icons.Star size={32} fill="currentColor" />
                            </div>
                        </div>

                        <div className="opacity-0 animate-[slideUp_1.5s_ease-out_1.5s_forwards]">
                            <div className="inline-block border-y border-rose-300/50 py-3 px-8 mt-4 backdrop-blur-sm bg-white/30 rounded-full">
                                <p className="text-gray-600 font-cute text-lg tracking-[0.2em] uppercase">Okinawa Luxury Trip</p>
                            </div>
                        </div>

                        <div className={`transition-all duration-1000 transform ${showBtn ? 'opacity-100 translate-y-0' : 'opacity-0 translate-y-10'}`}>
                            <button 
                                onClick={onStart}
                                className="mt-12 relative group px-12 py-5 bg-gradient-to-r from-rose-400 to-pink-500 rounded-full text-white font-bold shadow-[0_10px_30px_rgba(244,63,94,0.4)] hover:shadow-[0_15px_40px_rgba(244,63,94,0.6)] hover:-translate-y-1 transition-all duration-300 overflow-hidden"
                            >
                                <div className="absolute inset-0 w-full h-full bg-gradient-to-r from-transparent via-white/30 to-transparent -translate-x-full group-hover:animate-shimmer"></div>
                                <span className="flex items-center gap-3 text-xl font-cute tracking-widest relative z-10">
                                    é–‹å•Ÿå¤¢å¹»æ—…ç¨‹ <Icons.Gift size={22} className="group-hover:rotate-12 transition-transform" />
                                </span>
                            </button>
                        </div>
                    </div>
                    
                    <style>{`
                        @keyframes fadeIn { from { opacity: 0; transform: translateY(-20px); } to { opacity: 1; transform: translateY(0); } }
                        @keyframes scaleIn { from { opacity: 0; transform: scale(0.9); filter: blur(10px); } to { opacity: 1; transform: scale(1); filter: blur(0); } }
                        @keyframes slideUp { from { opacity: 0; transform: translateY(30px); } to { opacity: 1; transform: translateY(0); } }
                    `}</style>
                </div>
            );
        };

        // --- æª¢æŸ¥æ¸…å–®çµ„ä»¶ (å« CRUD) ---
        const ChecklistView = ({ checklist, onToggleItem, onAddItem, onDeleteItem, onEditItem }) => {
            const [newItems, setNewItems] = React.useState({});
            const [editingItem, setEditingItem] = React.useState(null); // { catKey, index, text }

            // è¨ˆç®—é€²åº¦
            const calculateProgress = () => {
                let total = 0;
                let checked = 0;
                Object.values(checklist).forEach(category => {
                    category.items.forEach(item => {
                        total++;
                        if (item.checked) checked++;
                    });
                });
                return total === 0 ? 0 : Math.round((checked / total) * 100);
            };

            const progress = calculateProgress();

            // è™•ç†æ–°å¢è¼¸å…¥æ¡†
            const handleNewItemChange = (key, val) => {
                setNewItems(prev => ({ ...prev, [key]: val }));
            };

            const handleAddItem = (key) => {
                if (newItems[key] && newItems[key].trim()) {
                    onAddItem(key, newItems[key].trim());
                    setNewItems(prev => ({ ...prev, [key]: '' }));
                }
            };

            // è™•ç†ç·¨è¼¯
            const startEditing = (catKey, index, text) => {
                setEditingItem({ catKey, index, text });
            };

            const saveEditing = () => {
                if (editingItem && editingItem.text.trim()) {
                    onEditItem(editingItem.catKey, editingItem.index, editingItem.text.trim());
                    setEditingItem(null);
                }
            };

            return (
                <div className="px-4 pb-24 animate-[fadeIn_0.5s_ease-out]">
                    {/* é€²åº¦æ¢ */}
                    <div className="bg-white rounded-3xl p-6 shadow-lg shadow-pink-100/50 mb-6 sticky top-4 z-10 border border-pink-50">
                        <div className="flex justify-between items-end mb-2">
                            <h2 className="text-xl font-bold text-gray-800 font-cute">æº–å‚™é€²åº¦</h2>
                            <span className="text-2xl font-bold text-rose-500 font-script">{progress}%</span>
                        </div>
                        <div className="w-full bg-gray-100 rounded-full h-3 overflow-hidden">
                            <div 
                                className="bg-gradient-to-r from-rose-400 to-pink-500 h-3 rounded-full transition-all duration-1000 ease-out"
                                style={{ width: `${progress}%` }}
                            ></div>
                        </div>
                    </div>

                    {/* åˆ†é¡æ¸…å–® */}
                    <div className="space-y-6">
                        {Object.entries(checklist).map(([key, category]) => (
                            <div key={key} className="bg-white rounded-3xl overflow-hidden shadow-sm border border-pink-50">
                                <div className={`p-4 ${category.headerColor} flex items-center gap-3`}>
                                    <div className="p-2 bg-white/30 rounded-full text-white backdrop-blur-sm">
                                        {category.icon}
                                    </div>
                                    <h3 className="font-bold text-white text-lg tracking-wide flex-1">{category.title}</h3>
                                </div>
                                <div className="p-2 space-y-1">
                                    {category.items.map((item, index) => (
                                        <div key={index} className="flex items-center gap-2 p-2 rounded-xl hover:bg-gray-50 transition-colors group relative">
                                            
                                            {/* ç·¨è¼¯æ¨¡å¼ */}
                                            {editingItem && editingItem.catKey === key && editingItem.index === index ? (
                                                <div className="flex items-center gap-2 w-full animate-fadeIn">
                                                    <input 
                                                        type="text" 
                                                        value={editingItem.text}
                                                        onChange={(e) => setEditingItem({...editingItem, text: e.target.value})}
                                                        className="flex-1 border-b-2 border-rose-400 px-2 py-1 outline-none text-gray-700 bg-transparent"
                                                        autoFocus
                                                    />
                                                    <button onClick={saveEditing} className="p-2 text-green-500 hover:bg-green-50 rounded-full"><Icons.Save size={18} /></button>
                                                    <button onClick={() => setEditingItem(null)} className="p-2 text-gray-400 hover:bg-gray-100 rounded-full"><Icons.X size={18} /></button>
                                                </div>
                                            ) : (
                                                /* é¡¯ç¤ºæ¨¡å¼ */
                                                <>
                                                    <label className="flex items-center gap-3 flex-1 cursor-pointer">
                                                        <div className="relative flex items-center shrink-0">
                                                            <input 
                                                                type="checkbox" 
                                                                className="peer sr-only custom-checkbox"
                                                                checked={item.checked}
                                                                onChange={() => onToggleItem(key, index)}
                                                            />
                                                            <div className="w-6 h-6 border-2 border-gray-300 rounded-lg peer-checked:bg-rose-500 peer-checked:border-rose-500 transition-all flex items-center justify-center">
                                                                <svg className="w-4 h-4 text-white hidden pointer-events-none" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth="3" d="M5 13l4 4L19 7"></path></svg>
                                                            </div>
                                                        </div>
                                                        <span className={`text-gray-700 font-medium transition-all break-all ${item.checked ? 'line-through text-gray-400' : ''}`}>
                                                            {item.text}
                                                        </span>
                                                    </label>
                                                    
                                                    {/* æ“ä½œæŒ‰éˆ• (ä¿®æ”¹/åˆªé™¤) */}
                                                    <div className="flex items-center opacity-0 group-hover:opacity-100 transition-opacity">
                                                        <button onClick={() => startEditing(key, index, item.text)} className="p-2 text-gray-400 hover:text-blue-500 hover:bg-blue-50 rounded-full transition-colors">
                                                            <Icons.Edit size={16} />
                                                        </button>
                                                        <button onClick={() => onDeleteItem(key, index)} className="p-2 text-gray-400 hover:text-red-500 hover:bg-red-50 rounded-full transition-colors">
                                                            <Icons.Trash size={16} />
                                                        </button>
                                                    </div>
                                                </>
                                            )}
                                        </div>
                                    ))}

                                    {/* æ–°å¢é …ç›®å€å¡Š */}
                                    <div className="mt-2 pt-2 border-t border-gray-100 px-2 pb-2">
                                        <div className="flex items-center gap-2 bg-gray-50 rounded-full px-4 py-2 border border-gray-100 focus-within:border-rose-300 focus-within:ring-2 focus-within:ring-rose-100 transition-all">
                                            <input 
                                                type="text" 
                                                placeholder="æ–°å¢é …ç›®..." 
                                                className="bg-transparent outline-none flex-1 text-sm text-gray-600 placeholder-gray-400"
                                                value={newItems[key] || ''}
                                                onChange={(e) => handleNewItemChange(key, e.target.value)}
                                                onKeyDown={(e) => e.key === 'Enter' && handleAddItem(key)}
                                            />
                                            <button 
                                                onClick={() => handleAddItem(key)}
                                                disabled={!newItems[key]}
                                                className={`p-1 rounded-full transition-all ${newItems[key] ? 'text-rose-500 hover:bg-rose-100' : 'text-gray-300'}`}
                                            >
                                                <Icons.Plus size={18} />
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        ))}
                    </div>
                    <div className="h-20"></div>
                </div>
            );
        };

        // --- ä¸»ç¨‹å¼ ---
        const ItineraryApp = () => {
            const [showIntro, setShowIntro] = React.useState(true);
            const [activeTab, setActiveTab] = React.useState('day1');
            const [view, setView] = React.useState('itinerary');

            // è¡Œç¨‹è³‡æ–™ (ä¿æŒä¸è®Š)
            const itinerary = {
                day1: {
                    date: '12/23 (ä¸€)',
                    title: 'å•Ÿç¨‹èˆ‡è–èª•åˆå¤œ',
                    highlight: 'è¯èˆªç›´é£› & ç¾åœ‹æ‘',
                    details: [
                        { time: '15:50', activity: 'é£›æ©Ÿèµ·é£› (CI132)', icon: <Icons.Plane className="text-blue-500" />, note: 'é«˜é›„å‡ºç™¼ï¼Œ18:30 æŠµé”é‚£éœ¸', loc: '' },
                        { time: '19:00', activity: 'å–è»Šï¼šè‡¨ç©ºè±å´ç‡Ÿæ¥­æ‰€', icon: <Icons.Car className="text-green-600" />, note: 'è¨˜å¾—å»åœ‹å…§ç·š 10-A æ­æ¥é§è»Šã€‚ä¿éšªå·²ä¿å…¨éšªã€‚', loc: 'OTS è‡¨ç©ºè±å´ç‡Ÿæ¥­æ‰€' },
                        { time: '20:30', activity: 'å…¥ä½ Vessel Hotel', icon: <Icons.Star className="text-yellow-500" />, note: 'Annex è±ªè¯æµ·æ™¯æˆ¿ï¼Check-in ä¼‘æ¯', loc: 'Vessel Hotel Campana Okinawa' },
                        { time: '21:00', activity: 'è¼•é¬†æ™šé¤ & æ•£æ­¥', icon: <Icons.Utensils className="text-rose-400" />, note: 'A&W æ¼¢å ¡ï¼Œæ•£æ­¥çœ‹ Depot Island è–èª•ç‡ˆé£¾', loc: 'American Village Okinawa' }
                    ]
                },
                day2: {
                    date: '12/24 (äºŒ)',
                    title: 'å¹³å®‰å¤œï¼šè¦ªå­èˆ‡å¤§é¤',
                    highlight: 'å…’ç«¥ç‹åœ‹ & å¸Œçˆ¾é “',
                    details: [
                        { time: '09:00', activity: 'é£¯åº—æ—©é¤', icon: <Icons.Coffee className="text-amber-600" />, note: 'äº«ç”¨è±å¯Œåœ¨åœ°æ–™ç†', loc: 'Vessel Hotel Campana Okinawa' },
                        { time: '09:40', activity: 'æ²–ç¹©å…’ç«¥ç‹åœ‹', icon: <Icons.Baby className="text-orange-500" />, note: 'é¤µå‹•ç‰©ã€çœ‹å¤§è±¡ï¼Œå¥³å…’æ”¾é›»å¤©å ‚', loc: 'Okinawa Zoo & Museum' },
                        { time: '12:30', activity: 'Aeon Rycom', icon: <Icons.ShoppingBag className="text-blue-400" />, note: 'åˆé¤èˆ‡é€›è¡—ï¼Œä¸çœ‹é«˜çˆ¾å¤«ï¼Œå°ˆå¿ƒé™ªå®¶äºº', loc: 'AEON MALL Okinawa Rycom' },
                        { time: '18:30', activity: 'å¸Œçˆ¾é “è‡ªåŠ©æ™šé¤', icon: <Icons.Gift className="text-red-500" />, note: 'è–èª•å¤§é¤ï¼äº«ç”¨è±å¯Œå¤šæ¨£çš„è‡ªåŠ©æ–™ç†ï¼Œæ…¶ç¥ç¾å¥½å¹³å®‰å¤œã€‚', loc: 'Hilton Okinawa Chatan Resort' }
                    ]
                },
                day3: {
                    date: '12/25 (ä¸‰)',
                    title: 'è–èª•ç¯€ï¼šåŒ—éƒ¨å…œé¢¨',
                    highlight: 'é¯¨é¯Šé¤µé£Ÿç§€ & å®®é‡Œéºµ',
                    details: [
                        { time: '11:00', activity: 'è¨±ç”°ä¼‘æ¯ç«™', icon: <Icons.MapPin className="text-green-600" />, note: 'ä¸­é€”ä¼‘æ¯ï¼Œè²·å„ªæƒ ç¥¨', loc: 'Kyoda Roadside Station' },
                        { time: '12:00', activity: 'å®®é‡Œéºµ', icon: <Icons.Utensils className="text-rose-400" />, note: 'åè­·åœ¨åœ°ç¾é£Ÿï¼Œæ¦»æ¦»ç±³åº§ä½', loc: 'Miyazato Soba' },
                        { time: '15:00', activity: 'ç¾éº—æµ·æ°´æ—é¤¨', icon: <Icons.Fish className="text-indigo-500" />, note: 'é»‘æ½®ä¹‹æµ·é¤µé£Ÿç§€ (å¿…çœ‹)', loc: 'Okinawa Churaumi Aquarium' },
                        { time: '18:00', activity: 'Aeon Nago æ™šé¤', icon: <Icons.ShoppingBag className="text-blue-400" />, note: 'è¼•é¬†åƒæ™šé¤å†å›é£¯åº—', loc: 'AEON Nago' }
                    ]
                },
                day4: {
                    date: '12/26 (å››)',
                    title: 'å¥³ç‹çš„æ…¢æ´»æ—¥',
                    highlight: 'æ°´åœ“ & ç‰çƒä¹‹ç‰›',
                    details: [
                        { time: '10:30', activity: 'æ°´åœ“éºµåŒ… (Suien)', icon: <Icons.Heart className="text-pink-500" />, note: 'ç«¥è©±æ£®æ—è²·éºµåŒ…', loc: 'Bakery Suien' },
                        { time: '12:00', activity: 'Parco City', icon: <Icons.ShoppingBag className="text-purple-500" />, note: 'é˜¿å¡å°‡ã€è¥¿æ¾å±‹è£œè²¨', loc: 'SAN-A Urasoe West Coast PARCO CITY' },
                        { time: '13:30', activity: 'oHacortÃ© æ¸¯å·åº—', icon: <Icons.Cake className="text-rose-500" />, note: 'ã€é‡é»ã€‘è¶…ç¾å¤–äººä½å®…å€ï¼Œäº«ç”¨å¤¢å¹»æ°´æœå¡”', loc: 'oHacortÃ© Minatogawa' },
                        { time: '16:00', activity: 'Zhyvago Coffee', icon: <Icons.Coffee className="text-orange-400" />, note: 'å›ç¾åœ‹æ‘ï¼Œé»æ¯å’–å•¡çœ‹å¤•é™½', loc: 'ZHYVAGO COFFEE WORKS OKINAWA' },
                        { time: '18:30', activity: 'ç‰çƒä¹‹ç‰› (åŒ—è°·åº—)', icon: <Icons.Utensils className="text-rose-400" />, note: 'ã€å¿…åƒã€‘æ²–ç¹©ç‡’è‚‰å¤©èŠ±æ¿ï¼é ‚ç´šè‚‰è³ªå…¥å£å³åŒ–ï¼Œçµ•å°é›£å¿˜ã€‚', loc: 'Ryukyu no Ushi Chatan' }
                    ]
                },
                day5: {
                    date: '12/27 (äº”)',
                    title: 'ç”Ÿæ—¥å¿«æ¨‚ & æ­¸é€”',
                    highlight: 'DMM æ°´æ—é¤¨ & ä¸–ç•Œç¬¬ä¸€è˜‹æœæ´¾',
                    details: [
                        { time: '08:00', activity: 'ç”Ÿæ—¥å¿«æ¨‚ï¼', icon: <Icons.Gift className="text-pink-500" />, note: 'é£¯åº—æ—©é¤æ…¶ç”Ÿï¼Œæ‚ é–’æ•´ç†è¡Œæ', loc: 'Vessel Hotel Campana Okinawa' },
                        { time: '10:30', activity: 'DMM æ°´æ—é¤¨ (iias)', icon: <Icons.Music className="text-blue-500" />, note: 'æœ€æ–°çš„å½±åƒæ°´æ—é¤¨ï¼Œå¤¢å¹»ä¸”é©åˆæ‹ç…§', loc: 'DMM Kariyushi Aquarium' },
                        { time: '13:00', activity: 'Steak House 88', icon: <Icons.Utensils className="text-red-500" />, note: 'ã€åˆé¤ã€‘æ²–ç¹©è€ç‰Œç‰›æ’é¤¨ï¼å°±åœ¨å•†å ´å…§ï¼Œå¤§å£åƒè‚‰æ…¶ç”Ÿï¼', loc: 'Steak House 88 iias Okinawa Toyosaki' },
                        { time: '15:30', activity: 'ç€¨é•·å³¶ Umikaji Terrace', icon: <Icons.Heart className="text-rose-500" />, note: 'ã€å¿…åƒã€‘Mille Mele ä¸–ç•Œç¬¬ä¸€è˜‹æœæ´¾ï¼çœ‹é£›æ©Ÿèµ·é™çš„çµ•ç¾æ™¯é»ã€‚', loc: 'Senagajima Umikaji Terrace' },
                        { time: '17:00', activity: 'é‚„è»Š', icon: <Icons.Car className="text-gray-500" />, note: 'OTS è‡¨ç©ºè±å´ç‡Ÿæ¥­æ‰€é‚„è»Š (è¨˜å¾—åŠ æ»¿æ²¹)', loc: 'OTS Rent-a-car Rinku Toyosaki' },
                        { time: '19:30', activity: 'é£›æ©Ÿèµ·é£› (CI133)', icon: <Icons.Plane className="text-blue-500" />, note: 'å¸¶è‘—æ»¿æ»¿å›æ†¶å›å®¶', loc: '' }
                    ]
                }
            };

            // æ¸…å–®è³‡æ–™
            const initialChecklist = {
                common: { 
                    title: 'å…±åŒç‰©å“', 
                    headerColor: 'bg-rose-400',
                    icon: <Icons.List size={20} />,
                    items: [
                        { text: 'è­·ç…§ (æœ‰æ•ˆæœŸ6å€‹æœˆä»¥ä¸Š)', checked: false },
                        { text: 'æ—¥å¹£ç¾é‡‘', checked: false },
                        { text: 'ä¿¡ç”¨å¡ (JCBä½³)', checked: false },
                        { text: 'ç¶²å¡/æ¼«éŠè¨­å®š', checked: false },
                        { text: 'è¡Œå‹•é›»æº & å……é›»ç·š', checked: false },
                    ] 
                },
                kids: { 
                    title: 'å¯¶å¯¶å°ˆç”¨', 
                    headerColor: 'bg-orange-400',
                    icon: <Icons.Baby size={20} />,
                    items: [
                        { text: 'å°¿å¸ƒ (å¤ ç”¨å°±å¥½ï¼Œç•¶åœ°å¯è²·)', checked: false },
                        { text: 'æ¿•ç´™å·¾ & è¡›ç”Ÿç´™', checked: false },
                        { text: 'å¸¸å‚™è—¥å“ (é€€ç‡’/éæ•)', checked: false },
                        { text: 'å®‰æ’«ç©å…·/è¢«è¢«', checked: false },
                        { text: 'ä¿æº«ç“¶ & æ°´å£º', checked: false },
                        { text: 'è–„å¤–å¥— (å®¤å…§å†·æ°£)', checked: false },
                    ] 
                },
                car: { 
                    title: 'æµ·å¤–ç§Ÿè»Šå¿…å‚™', 
                    headerColor: 'bg-blue-500',
                    icon: <Icons.Car size={20} />,
                    items: [
                        { text: 'å°ç£é§•ç…§æ­£æœ¬', checked: false },
                        { text: 'æ—¥æ–‡è­¯æœ¬ (ç›£ç†ç«™ç”³è«‹)', checked: false },
                        { text: 'ç§Ÿè»Šé ç´„ç¢ºèªå–®', checked: false },
                        { text: 'æ‰‹æ©Ÿæ¶ (å‚™ç”¨)', checked: false },
                    ] 
                },
                personal: { 
                    title: 'éš¨èº«è¡Œæ', 
                    headerColor: 'bg-teal-500',
                    icon: <Icons.ShoppingBag size={20} />,
                    items: [
                        { text: 'é›¨å‚˜/é®é™½å¸½', checked: false },
                        { text: 'ç’°ä¿è³¼ç‰©è¢‹', checked: false },
                        { text: 'å€‹äººä¿é¤Šå“', checked: false },
                    ] 
                }
            };

            const [checklist, setChecklist] = React.useState(initialChecklist);

            const toggleChecklistItem = (categoryKey, itemIndex) => {
                setChecklist(prev => {
                    const newItems = [...prev[categoryKey].items];
                    newItems[itemIndex] = { ...newItems[itemIndex], checked: !newItems[itemIndex].checked };
                    return { ...prev, [categoryKey]: { ...prev[categoryKey], items: newItems } };
                });
            };

            const addItem = (category, text) => {
                setChecklist(prev => ({
                    ...prev,
                    [category]: {
                        ...prev[category],
                        items: [...prev[category].items, { text, checked: false }]
                    }
                }));
            };

            const deleteItem = (category, index) => {
                setChecklist(prev => {
                    const newItems = prev[category].items.filter((_, i) => i !== index);
                    return { ...prev, [category]: { ...prev[category], items: newItems } };
                });
            };

            const editItem = (category, index, newText) => {
                setChecklist(prev => {
                    const newItems = [...prev[category].items];
                    newItems[index] = { ...newItems[index], text: newText };
                    return { ...prev, [category]: { ...prev[category], items: newItems } };
                });
            };

            const openMap = (location) => {
                if (!location) return;
                window.open(`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(location)}`, '_blank');
            };

            if (showIntro) {
                return <WelcomeScreen onStart={() => setShowIntro(false)} />;
            }

            return (
                <div className="min-h-screen pb-20 fade-enter-active max-w-md mx-auto bg-rose-50 shadow-2xl overflow-hidden relative">
                    
                    {/* Header */}
                    <header className="safe-top bg-gradient-to-br from-rose-400 via-rose-500 to-pink-600 text-white pt-8 pb-6 px-6 rounded-b-[40px] shadow-lg relative overflow-hidden z-20">
                        <div className="absolute top-0 right-0 opacity-10 transform translate-x-10 -translate-y-10">
                            <Icons.Heart size={180} />
                        </div>
                        <div className="relative z-10">
                            <h1 className="text-2xl font-bold mb-1 font-cute tracking-wide flex items-center gap-2">
                                å¥³ç‹çš„æ²–ç¹©ç”Ÿæ—¥ä¹‹æ—… <Icons.Plane size={20} className="animate-pulse" />
                            </h1>
                            <p className="text-rose-100 text-sm font-sans mb-4">12/23 - 12/27 ï½œ 5 Days 4 Nights</p>
                            
                            {/* å¿«é€Ÿè³‡è¨Šå¡ (åƒ…åœ¨è¡Œç¨‹é é¡¯ç¤º) */}
                            {view === 'itinerary' && (
                                <div className="bg-white/10 backdrop-blur-md rounded-2xl p-3 text-xs space-y-2 border border-white/20 shadow-inner">
                                    <div className="flex items-center gap-2">
                                        <Icons.Plane size={14} className="text-rose-200" />
                                        <span className="font-medium opacity-90">å» CI132 (15:50) / å› CI133 (19:30)</span>
                                    </div>
                                    <div className="flex items-center gap-2">
                                        <Icons.Car size={14} className="text-rose-200" />
                                        <span className="font-medium opacity-90">OTS å–è»Šï¼š12/23 19:00</span>
                                    </div>
                                </div>
                            )}
                        </div>
                    </header>

                    {/* ä¸»è¦å…§å®¹å€ */}
                    <main className="mt-4 relative z-10 min-h-[calc(100vh-200px)]">
                        
                        {view === 'itinerary' ? (
                            <>
                                {/* æ—¥æœŸé¸æ“‡ Tab */}
                                <div className="sticky top-0 z-20 bg-rose-50/95 backdrop-blur-sm pt-2 pb-4 shadow-sm">
                                    <div className="flex overflow-x-auto px-4 gap-3 no-scrollbar snap-x">
                                        {Object.entries(itinerary).map(([key, day]) => (
                                            <button key={key} onClick={() => setActiveTab(key)} className={`snap-center flex-shrink-0 px-5 py-2 rounded-2xl transition-all shadow-sm border font-cute tracking-wide flex flex-col items-center min-w-[80px] ${activeTab === key ? 'bg-gradient-to-br from-rose-500 to-pink-500 text-white border-transparent shadow-rose-200 shadow-md transform scale-105' : 'bg-white text-gray-500 border-gray-100'}`}>
                                                <span className="text-[10px] opacity-80">{day.date}</span>
                                                <span className="font-bold text-sm">{key === 'day5' ? 'ğŸ‚ ç”Ÿæ—¥' : `Day ${key.replace('day', '')}`}</span>
                                            </button>
                                        ))}
                                    </div>
                                </div>

                                {/* è¡Œç¨‹å¡ç‰‡ */}
                                <div className="px-4 animate-[fadeIn_0.5s_ease-out] pb-24 safe-bottom">
                                    <div className="bg-white rounded-[32px] shadow-lg shadow-pink-100 overflow-hidden border border-pink-50">
                                        <div className="bg-gradient-to-r from-rose-50 to-pink-50 p-5 border-b border-rose-100 flex justify-between items-center">
                                            <div>
                                                <h2 className="text-xl font-bold text-gray-800 font-cute flex items-center gap-2">
                                                    {itinerary[activeTab].title}
                                                </h2>
                                                <div className="mt-2 flex items-center gap-1.5 text-rose-600 text-xs font-bold bg-white px-3 py-1 rounded-full w-fit shadow-sm border border-rose-100">
                                                    <Icons.Star size={12} className="text-rose-500 fill-rose-500" />
                                                    <span>{itinerary[activeTab].highlight}</span>
                                                </div>
                                            </div>
                                            {activeTab === 'day5' && <div className="animate-bounce"><Icons.Cake size={32} className="text-rose-400" /></div>}
                                        </div>
                                        
                                        <div className="p-5 space-y-8">
                                            {itinerary[activeTab].details.map((item, index) => (
                                                <div key={index} className="flex gap-4 relative group">
                                                    {/* é€£æ¥ç·š */}
                                                    {index !== itinerary[activeTab].details.length - 1 && (
                                                        <div className="absolute left-[18px] top-10 bottom-[-32px] w-0.5 bg-gray-100 group-hover:bg-rose-200 transition-colors"></div>
                                                    )}
                                                    
                                                    {/* Icon æ³¡æ³¡ */}
                                                    <div className="relative z-10 w-10 h-10 rounded-full bg-white border-2 border-pink-100 flex items-center justify-center shadow-sm shrink-0 group-hover:scale-110 group-hover:border-rose-300 transition-all duration-300">
                                                        {item.icon}
                                                    </div>

                                                    {/* å…§å®¹ */}
                                                    <div className="flex-1 pb-2">
                                                        <div className="flex justify-between items-start mb-1">
                                                            <div className="flex items-center gap-2 mb-1">
                                                                <span className="text-xs font-bold text-rose-500 bg-rose-50 px-2 py-0.5 rounded-md border border-rose-100">{item.time}</span>
                                                            </div>
                                                            {item.loc && (
                                                                <button onClick={() => openMap(item.loc)} className="text-gray-400 hover:text-blue-500 transition-colors">
                                                                    <Icons.Nav size={18} />
                                                                </button>
                                                            )}
                                                        </div>
                                                        <h3 className="font-bold text-gray-800 text-base mb-1">{item.activity}</h3>
                                                        <p className="text-gray-500 text-sm leading-relaxed font-light">
                                                            {item.note}
                                                        </p>
                                                    </div>
                                                </div>
                                            ))}
                                        </div>
                                    </div>
                                    
                                    {/* åº•éƒ¨å°èª */}
                                    <div className="mt-8 text-center opacity-60">
                                        <p className="font-script text-2xl text-rose-300">Enjoy your trip</p>
                                    </div>
                                </div>
                            </>
                        ) : (
                            // æ¸…å–®è¦–åœ–
                            <ChecklistView 
                                checklist={checklist} 
                                onToggleItem={toggleChecklistItem} 
                                onAddItem={addItem}
                                onDeleteItem={deleteItem}
                                onEditItem={editItem}
                            />
                        )}

                    </main>

                    {/* åº•éƒ¨å°èˆªåˆ— */}
                    <div className="fixed bottom-6 left-1/2 transform -translate-x-1/2 w-[90%] max-w-[400px] bg-white rounded-full shadow-[0_10px_40px_rgba(0,0,0,0.1)] p-2 flex justify-between items-center z-40 border border-gray-100 safe-bottom">
                        <button 
                            onClick={() => setView('itinerary')}
                            className={`flex-1 flex items-center justify-center gap-2 py-3 rounded-full transition-all duration-300 ${view === 'itinerary' ? 'bg-gray-800 text-white shadow-lg' : 'text-gray-400 hover:bg-gray-50'}`}
                        >
                            <Icons.Calendar size={20} />
                            <span className="font-bold text-sm">è¡Œç¨‹</span>
                        </button>
                        <button 
                            onClick={() => setView('checklist')}
                            className={`flex-1 flex items-center justify-center gap-2 py-3 rounded-full transition-all duration-300 ${view === 'checklist' ? 'bg-rose-500 text-white shadow-lg shadow-rose-200' : 'text-gray-400 hover:bg-gray-50'}`}
                        >
                            <Icons.CheckSquare size={20} />
                            <span className="font-bold text-sm">æº–å‚™æ¸…å–®</span>
                        </button>
                    </div>

                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<ItineraryApp />);
    </script>
</body>
</html>
